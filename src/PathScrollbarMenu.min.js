var PathScrollbarMenu=new Class({Implements:[Options,Events],options:{degradeIE:true,fps:30,content:'<div class="wrap">\n\t\t\t\t\t<p class="closed-text">Viewing</p>\n\t\t\t\t\t<div class="closed-icon"></div>\n\t\t\t\t </div>\n\t\t\t\t <div class="arrow"></div>'},initialize:function(a){this.setOptions(a);window.requestAnimFrame=function(a){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1e3/PathMenu.options.fps)}}(this);this.container=new Element("div",{id:"scrollbar-menu","class":"clearfix unselectable",html:this.options.content});this.container.inject($(document.body));this.containerHeight=this.container.getSize().y;window.animLoop=function(a){this.fireEvent("animLoop");if(this.scrollPosition!==window.getScroll().y&&!this.hidden){if(Browser.ie&&this.options.degradeIE){clearTimeout(this.ieTimeout);delete this.ieTimeout;this.container.hide()}this.setPosition();this.fireEvent("painting")}else{if(Browser.ie&&this.options.degradeIE){if(!this.ieTimeout){this.ieTimeout=setTimeout(function(){this.container.show()}.bind(this),300)}}}requestAnimFrame(animLoop,this.container)}.bind(this);requestAnimFrame(animLoop,this.container)},setPosition:function(){element_offset=0;var a=15,b=window.getSize().y,c=b-this.containerHeight,d=window.getScroll().y,e=document.getScrollSize().y,f=e/(b-a*2),g=0;if(e<=b){g=c/2-element_offset}else{g=a+(d+b/2)/f;-element_offset}if(g<0){g=0}else if(g>c){g=c}var h=d+g,i=d/e,j=(b-a*2)*i,k=b/e*b-a,l=(k-this.containerHeight)/2>0?(k-this.containerHeight)/2:0,m=j+l;this.container.setStyle("top",m);this.scrollPosition=d}})